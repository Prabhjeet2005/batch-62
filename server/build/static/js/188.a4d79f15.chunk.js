"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[188],{4063:(e,s,a)=>{a.d(s,{A:()=>m});var t=a(2555),n=a(45),r=a(8139),i=a.n(r),c=a(5043),o=a(7852),l=a(579);const d=["bsPrefix","bg","pill","text","className","as"],h=c.forwardRef(((e,s)=>{let{bsPrefix:a,bg:r="primary",pill:c=!1,text:h,className:m,as:x="span"}=e,u=(0,n.A)(e,d);const p=(0,o.oU)(a,"badge");return(0,l.jsx)(x,(0,t.A)((0,t.A)({ref:s},u),{},{className:i()(m,p,c&&"rounded-pill",h&&"text-".concat(h),r&&"bg-".concat(r))}))}));h.displayName="Badge";const m=h},6188:(e,s,a)=>{a.r(s),a.d(s,{default:()=>T});var t=a(2555),n=a(5043),r=a(3519),i=a(45),c=a(8139),o=a.n(c),l=a(1969),d=a(6618),h=a(7852),m=a(4488),x=a(579);const u=["className","bsPrefix","as"],p=(0,m.A)("h4");p.displayName="DivStyledAsH4";const b=n.forwardRef(((e,s)=>{let{className:a,bsPrefix:n,as:r=p}=e,c=(0,i.A)(e,u);return n=(0,h.oU)(n,"alert-heading"),(0,x.jsx)(r,(0,t.A)({ref:s,className:o()(a,n)},c))}));b.displayName="AlertHeading";const g=b;var v=a(7071);const A=["className","bsPrefix","as"],j=n.forwardRef(((e,s)=>{let{className:a,bsPrefix:n,as:r=v.A}=e,c=(0,i.A)(e,A);return n=(0,h.oU)(n,"alert-link"),(0,x.jsx)(r,(0,t.A)({ref:s,className:o()(a,n)},c))}));j.displayName="AlertLink";const f=j;var N=a(8072),y=a(5632);const w=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],C=n.forwardRef(((e,s)=>{const a=(0,l.Zw)(e,{show:"onClose"}),{bsPrefix:n,show:r=!0,closeLabel:c="Close alert",closeVariant:m,className:u,children:p,variant:b="primary",onClose:g,dismissible:v,transition:A=N.A}=a,j=(0,i.A)(a,w),f=(0,h.oU)(n,"alert"),C=(0,d.A)((e=>{g&&g(!1,e)})),P=!0===A?N.A:A,U=(0,x.jsxs)("div",(0,t.A)((0,t.A)({role:"alert"},P?void 0:j),{},{ref:s,className:o()(u,f,b&&"".concat(f,"-").concat(b),v&&"".concat(f,"-dismissible")),children:[v&&(0,x.jsx)(y.A,{onClick:C,"aria-label":c,variant:m}),p]}));return P?(0,x.jsx)(P,(0,t.A)((0,t.A)({unmountOnExit:!0},j),{},{ref:void 0,in:r,children:U})):r?U:null}));C.displayName="Alert";const P=Object.assign(C,{Link:f,Heading:g}),U=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],k=n.forwardRef(((e,s)=>{let{bsPrefix:a,className:n,striped:r,bordered:c,borderless:l,hover:d,size:m,variant:u,responsive:p}=e,b=(0,i.A)(e,U);const g=(0,h.oU)(a,"table"),v=o()(n,g,u&&"".concat(g,"-").concat(u),m&&"".concat(g,"-").concat(m),r&&"".concat(g,"-").concat("string"===typeof r?"striped-".concat(r):"striped"),c&&"".concat(g,"-bordered"),l&&"".concat(g,"-borderless"),d&&"".concat(g,"-hover")),A=(0,x.jsx)("table",(0,t.A)((0,t.A)({},b),{},{className:v,ref:s}));if(p){let e="".concat(g,"-responsive");return"string"===typeof p&&(e="".concat(e,"-").concat(p)),(0,x.jsx)("div",{className:e,children:A})}return A}));k.displayName="Table";const R=k;var S=a(4063);const L=["bsPrefix","size","vertical","className","role","as"],z=n.forwardRef(((e,s)=>{let{bsPrefix:a,size:n,vertical:r=!1,className:c,role:l="group",as:d="div"}=e,m=(0,i.A)(e,L);const u=(0,h.oU)(a,"btn-group");let p=u;return r&&(p="".concat(u,"-vertical")),(0,x.jsx)(d,(0,t.A)((0,t.A)({},m),{},{ref:s,role:l,className:o()(c,p,n&&"".concat(u,"-").concat(n))}))}));z.displayName="ButtonGroup";const D=z;var M=a(4282),B=a(9002),H=a(9722),O=a(6607);const T=()=>{const[e,s]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[c,o]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1),[h,m]=(0,n.useState)("");(0,n.useEffect)((()=>{(async()=>{i(!0);try{const{data:e}=await H.A.get("http://localhost:4000/admin/login",{withCredentials:!0});if(console.log("\ud83d\ude80 ~ MerchantOnboardingTable ~ loginData:",e),!e.data.isAdmin)return o("Access Denied. Admins only.\n Redirecting to Homepage in 5s"),void setTimeout((()=>d(!0)),5e3);const{data:a}=await H.A.get("http://localhost:4000/admin/getMerchantsInfo",{withCredentials:!0});a.success?s(a.data):o(a.message||"Failed to fetch data")}catch(t){var e,a;const s=(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t.message;s.includes("Token Missing")?o("Session expired. Redirecting to login..."):o(s)}finally{i(!1)}})()}),[]);const u=async(e,a)=>{i(!0);try{const{data:n}=await H.A.patch("http://localhost:4000/admin/onboarding-status-update",{username:e,action:a},{withCredentials:!0});n.success?(s((s=>s.map((s=>s.username===e?(0,t.A)((0,t.A)({},s),{},{onboarding:n.data.onboarding}):s)))),m("")):m(n.data.message||"Update failed")}catch(c){var n,r;m((null===c||void 0===c||null===(n=c.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Status update error")}finally{i(!1)}};return l?(0,x.jsx)(B.C5,{to:"/",replace:!0}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(O.A,{isLoading:a}),(0,x.jsxs)(r.A,{className:"my-4",children:[(0,x.jsx)("h3",{className:"mb-4",children:"Merchant Onboarding Status"}),c?(0,x.jsx)(P,{variant:"danger",children:c}):(0,x.jsxs)(x.Fragment,{children:[h&&(0,x.jsx)(P,{variant:"warning",children:h}),(0,x.jsxs)(R,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"#"}),(0,x.jsx)("th",{children:"Merchant Name"}),(0,x.jsx)("th",{children:"Username"}),(0,x.jsx)("th",{children:"Email"}),(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"Last Updated"}),(0,x.jsx)("th",{children:"Updated By"}),(0,x.jsx)("th",{children:"Actions"})]})}),(0,x.jsx)("tbody",{children:e.map(((e,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:s+1}),(0,x.jsx)("td",{children:e.name}),(0,x.jsx)("td",{children:e.username}),(0,x.jsx)("td",{children:e.email}),(0,x.jsx)("td",{children:(0,x.jsx)(S.A,{bg:"Approved"===e.onboarding.status?"success":"Pending"===e.onboarding.status?"warning":"danger",children:e.onboarding.status})}),(0,x.jsx)("td",{children:new Date(e.onboarding.lastUpdateDate).toLocaleString()}),(0,x.jsx)("td",{children:e.onboarding.statusUpdatedBy}),(0,x.jsx)("td",{children:(0,x.jsxs)(D,{size:"sm",children:[(0,x.jsx)(M.A,{variant:"success",onClick:()=>u(e.username,"Approved"),disabled:"Approved"===e.onboarding.status,children:"Approve"}),(0,x.jsx)(M.A,{variant:"danger",onClick:()=>u(e.username,"Rejected"),disabled:"Rejected"===e.onboarding.status,children:"Reject"})]})})]},s)))})]})]})]})]})}}}]);
//# sourceMappingURL=188.a4d79f15.chunk.js.map